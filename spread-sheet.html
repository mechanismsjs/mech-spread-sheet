<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>Spreadsheet</title>
    <link rel="stylesheet" type="text/css" href="css/spread-sheet.css">
    <script type="text/javascript" src="node_modules/mech-core/dist/mech-core.js"></script>
    <script type="text/javascript" src="node_modules/mech-web/dist/mech-web.js"></script>
    <script type="text/javascript" src="node_modules/mech-scope-cell/dist/mech-scope-cell.js"></script>
    <script type="text/javascript" src="node_modules/mech-math/dist/mech-math.js"></script>
  </head>
  <body class="spread-sheet">
      <div>
        <input type="text" id="equation">
      </div>
      <div>
        <input type="text" id="A:1" onfocus="m.cellGet('setEqu').go;" onfocusout="m.cellGet('clearEqu').go;">
        <input type="text" id="A:2" onfocus="m.cellGet('setEqu').go;" onfocusout="m.cellGet('clearEqu').go;">
        <input type="text" id="A:3" onfocus="m.cellGet('setEqu').go;" onfocusout="m.cellGet('clearEqu').go;">
      </div>
      <div>
        <input type="text" id="B:1" onfocus="m.cellGet('setEqu').go;" onfocusout="m.cellGet('clearEqu').go;">
        <input type="text" id="B:2" onfocus="m.cellGet('setEqu').go;" onfocusout="m.cellGet('clearEqu').go;">
        <input type="text" id="B:3" onfocus="m.cellGet('setEqu').go;" onfocusout="m.cellGet('clearEqu').go;">
      </div>
      <div>
        <input type="text" id="C:1" onfocus="m.cellGet('setEqu').go;" onfocusout="m.cellGet('clearEqu').go;">
        <input type="text" id="C:2" onfocus="m.cellGet('setEqu').go;" onfocusout="m.cellGet('clearEqu').go;">
        <input type="text" id="C:3" onfocus="m.cellGet('setEqu').go;" onfocusout="m.cellGet('clearEqu').go;">
      </div>
  </body>
  <script>

    // Set equation cell to active cell: TODO: set to actual equation in cell and not the result of the equation
    m.cell("setEqu",m.propSet('value', m.e$('equation'), m.cellGet(m.propGet('id', m.elemActive()))));
    m.cell("clearEqu",m.propSet('value', m.e$('equation'), ""));

    m.cell("A:1", 3);
    m.cell("A:2", 4);
    m.cell("A:3", 6);

    m.cell("B:1", 7);
    m.cell("B:2", m.add(m.cellGet("C:2"), m.cellGet("B:3")));
    m.cell("B:3", 9);

    m.cell("C:1", 10);
    m.cell("C:2", m.add(m.cellGet("B:1"), m.cellGet("C:3")));
    m.cell("C:3", 12);

    m.propSet('value', m.e$('A:1'), m.cellGet("A:1")).go;
    m.propSet('value', m.e$('A:2'), m.cellGet("A:2")).go;
    m.propSet('value', m.e$('A:3'), m.cellGet("A:3")).go;

    m.propSet('value', m.e$('B:1'), m.cellGet("B:1")).go;
    m.propSet('value', m.e$('B:2'), m.cellGet("B:2")).go;
    m.propSet('value', m.e$('B:3'), m.cellGet("B:3")).go;

    m.propSet('value', m.e$('C:1'), m.cellGet("C:1")).go;
    m.propSet('value', m.e$('C:2'), m.cellGet("C:2")).go;
    m.propSet('value', m.e$('C:3'), m.cellGet("C:3")).go;

  </script>
</html>
